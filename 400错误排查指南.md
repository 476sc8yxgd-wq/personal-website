# 400错误排查和解决方案

## 问题描述
前端访问页面时出现 "Failed to load resource: server responded with a status of 400 ()" 错误。

## 原因分析

400错误通常是Supabase API请求失败，可能的原因：

1. **Supabase API Key无效或已过期**
2. **Supabase数据库表不存在或权限不足**
3. **API请求参数格式错误**

## 解决方案

### 方案一：更新Supabase API Key（推荐）

1. 登录Supabase控制台：https://supabase.com/dashboard
2. 选择你的项目：assfhuxuglbootvpigeu
3. 进入左侧菜单：Settings → API
4. 复制新的 "anon public" key
5. 更新前端环境变量文件 `frontend/.env`：

```env
VITE_SUPABASE_URL=https://assfhuxuglbootvpigeu.supabase.co
VITE_SUPABASE_ANON_KEY=这里粘贴新的API Key
```

6. 重启前端开发服务器：

```bash
cd frontend
# 按 Ctrl+C 停止服务器
npm run dev
```

### 方案二：使用本地模拟数据（临时方案）

如果Supabase暂时不可用，可以临时修改About.tsx，使用硬编码数据：

```typescript
// 在About.tsx中，修改 useEffect 部分如下：

useEffect(() => {
  // 临时使用模拟数据
  const mockProfile: Profile = {
    id: 1,
    name: '尹博一',
    age: 19,
    location: '武汉',
    qq: '123456789',
    email: 'example@email.com',
    bio: '武汉理工大学经济学院在读本科生',
    education: '武汉理工大学',
    major: '经济学',
    interests: ['游戏', '运动', '阅读'],
    motto: '永不放弃，持续进步',
    created_at: new Date().toISOString()
  };
  
  setProfile(mockProfile);
  setLoading(false);
}, []);
```

### 方案三：检查浏览器控制台

1. 打开浏览器开发者工具（F12）
2. 切换到 "Console" 标签
3. 查看红色错误信息
4. 切换到 "Network" 标签
5. 找到失败的请求，查看详细信息：
   - Request URL
   - Status Code
   - Response

常见错误信息：
- `Invalid API key` → API Key过期，需要更新
- `Table not found` → 数据库表不存在，需要创建
- `Permission denied` → 权限不足，需要检查RLS策略

### 方案四：验证Supabase连接

创建一个测试文件 `test-supabase.js`：

```javascript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = 'https://assfhuxuglbootvpigeu.supabase.co';
const supabaseKey = '你的API Key';

const supabase = createClient(supabaseUrl, supabaseKey);

// 测试连接
supabase
  .from('profile')
  .select('*')
  .single()
  .then(({ data, error }) => {
    if (error) {
      console.error('连接失败:', error);
    } else {
      console.log('连接成功:', data);
    }
  });
```

在浏览器控制台运行此代码，检查连接是否正常。

## 快速诊断

### 检查1：确认Supabase项目状态
- 访问：https://supabase.com/dashboard/project/assfhuxuglbootvpigeu
- 确认项目是否处于活动状态
- 检查是否有过期或暂停的项目

### 检查2：确认数据库表存在
1. 在Supabase控制台，进入左侧菜单：Table Editor
2. 检查以下表是否存在：
   - `profile`
   - `blogs`
   - `qa`
3. 如果表不存在，需要创建表结构

### 检查3：确认RLS策略
1. 在Supabase控制台，进入左侧菜单：Authentication → Policies
2. 检查每个表的RLS策略是否允许anon用户访问
3. 必须有允许 anon key 读取的策略

## 建议的操作步骤

1. **立即操作**：检查浏览器控制台的具体错误信息
2. **首选方案**：更新Supabase API Key（如果已过期）
3. **临时方案**：使用本地模拟数据，确保页面可以显示
4. **长期方案**：修复Supabase配置和数据表结构

## 联系支持

如果以上方案都无法解决问题：
- 查看Supabase日志：Dashboard → Logs
- 联系Supabase技术支持
- 查看Supabase文档：https://supabase.com/docs

---

**注意**：400错误通常不会导致页面崩溃，只会影响数据加载。页面的静态内容应该仍然可以正常显示。
