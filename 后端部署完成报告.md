# åç«¯éƒ¨ç½²å®ŒæˆæŠ¥å‘Š

## ğŸ“… éƒ¨ç½²æ—¶é—´
2025å¹´12æœˆ26æ—¥ 11:35

## ğŸ–¥ï¸ æœåŠ¡å™¨ä¿¡æ¯
- **æœåŠ¡å™¨**: 43.138.3.207
- **å®ä¾‹ID**: lhins-j399yp9e
- **ç³»ç»Ÿ**: OpenCloudOS 8
- **éƒ¨ç½²æ–¹å¼**: Docker

## âœ… éƒ¨ç½²çŠ¶æ€
**åç«¯éƒ¨ç½²æˆåŠŸï¼**

## ğŸ“¦ éƒ¨ç½²è¯¦æƒ…

### 1. å®¹å™¨ä¿¡æ¯
- **å®¹å™¨åç§°**: personal_website_backend
- **å®¹å™¨ID**: faa446d7e8f0
- **é•œåƒ**: backend_20251226112439-backend
- **ç«¯å£æ˜ å°„**: 0.0.0.0:3001->3001/tcp
- **çŠ¶æ€**: Running (Healthy)
- **é‡å¯ç­–ç•¥**: unless-stopped

### 2. æœåŠ¡ä¿¡æ¯
- **Node.jsç‰ˆæœ¬**: v18.20.8
- **åç«¯æ¡†æ¶**: Express.js
- **ç«¯å£**: 3001
- **ç¯å¢ƒ**: production

### 3. APIç«¯ç‚¹

#### å¥åº·æ£€æŸ¥ç«¯ç‚¹
- **æœ¬åœ°è®¿é—®**: http://localhost:3001/health
- **å¤–ç½‘è®¿é—®**: http://43.138.3.207:3001/health
- **è¿”å›**: OK

#### APIå¥åº·ç«¯ç‚¹
- **æœ¬åœ°è®¿é—®**: http://localhost:3001/api/health
- **å¤–ç½‘è®¿é—®**: http://43.138.3.207:3001/api/health
- **è¿”å›**: {"status":"Server is running","timestamp":"2025-12-26T03:35:14.831Z"}

### 4. è·¯ç”±é…ç½®
- `/api/health` - æœåŠ¡å™¨çŠ¶æ€æ£€æŸ¥
- `/health` - Dockerå¥åº·æ£€æŸ¥
- `/api/profile` - ä¸ªäººèµ„æ–™API
- `/api/blogs` - åšå®¢API
- `/api/qa` - é—®ç­”API

### 5. ç¯å¢ƒå˜é‡é…ç½®
```env
NODE_ENV=production
PORT=3001
SUPABASE_URL=https://assfhuxuglbootvpigeu.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
JWT_SECRET=your_jwt_secret_key_here_please_change_this
JWT_EXPIRES_IN=7d
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. Supabaseè¿æ¥é—®é¢˜
å½“å‰Supabase API Keyå¯èƒ½å·²è¿‡æœŸæˆ–æ— æ•ˆï¼Œå¯¼è‡´æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š
```
Failed to connect to Supabase: {
  message: 'Invalid API key',
  hint: 'Double check your Supabase `anon` or `service_role` API key.'
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç™»å½•Supabaseæ§åˆ¶å°ï¼Œæ›´æ–°API Key
- ä¿®æ”¹docker-compose.ymlä¸­çš„SUPABASE_ANON_KEYç¯å¢ƒå˜é‡
- é‡æ–°éƒ¨ç½²å®¹å™¨ï¼š
  ```bash
  cd /root/backend_20251226112439
  docker-compose down
  docker-compose up -d
  ```

### 2. å‰ç«¯é™æ€æ–‡ä»¶
åç«¯çš„publicç›®å½•ç›®å‰ä¸ºç©ºï¼Œå‰ç«¯æ–‡ä»¶éƒ¨ç½²åéœ€è¦å¤åˆ¶åˆ°æ­¤ç›®å½•ã€‚

### 3. Node.jsç‰ˆæœ¬è­¦å‘Š
å½“å‰ä½¿ç”¨Node.js 18ï¼Œä½†Supabaseå»ºè®®ä½¿ç”¨Node.js 20æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚å»ºè®®åç»­å‡çº§åˆ°Node.js 20ã€‚

## ğŸš€ å‰ç«¯éƒ¨ç½²å»ºè®®

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®å¡”é¢æ¿éƒ¨ç½²å‰ç«¯
1. åœ¨å®å¡”é¢æ¿ä¸­å®‰è£…Node.js PM2ç®¡ç†å™¨
2. æ„å»ºå‰ç«¯é¡¹ç›®ï¼š
   ```bash
   cd frontend
   npm install
   npm run build
   ```
3. å°†distç›®å½•ä¸­çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä»¥ä¸‹ç›®å½•ä¹‹ä¸€ï¼š
   - `/root/backend_20251226112439/public/` ï¼ˆæ¨èï¼Œåç«¯ä¼šç›´æ¥æä¾›é™æ€æ–‡ä»¶æœåŠ¡ï¼‰
   - æˆ–é…ç½®nginxåå‘ä»£ç†

### æ–¹æ³•äºŒï¼šä½¿ç”¨nginxåå‘ä»£ç†
1. æ„å»ºå‰ç«¯é¡¹ç›®
2. å°†distç›®å½•å¤åˆ¶åˆ°nginxç½‘ç«™æ ¹ç›®å½•
3. é…ç½®nginxåå‘ä»£ç†ï¼Œå°†`/api`è¯·æ±‚è½¬å‘åˆ°åç«¯3001ç«¯å£

## ğŸ“ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹å®¹å™¨çŠ¶æ€
```bash
docker ps | grep personal_website_backend
```

### æŸ¥çœ‹å®¹å™¨æ—¥å¿—
```bash
docker logs personal_website_backend
```

### åœæ­¢å®¹å™¨
```bash
cd /root/backend_20251226112439
docker-compose down
```

### å¯åŠ¨å®¹å™¨
```bash
cd /root/backend_20251226112439
docker-compose up -d
```

### é‡å¯å®¹å™¨
```bash
docker restart personal_website_backend
```

### é‡æ–°æ„å»ºå¹¶å¯åŠ¨
```bash
cd /root/backend_20251226112439
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šå®¹å™¨æ— æ³•å¯åŠ¨
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs personal_website_backend

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3001

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œåœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
```

### é—®é¢˜2ï¼šAPIè¯·æ±‚å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep personal_website_backend

# æŸ¥çœ‹æ—¥å¿—
docker logs personal_website_backend

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:3001/api/health

# æµ‹è¯•å¤–ç½‘è®¿é—®
curl http://43.138.3.207:3001/api/health
```

### é—®é¢˜3ï¼šSupabaseè¿æ¥å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Supabase API Keyæ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥Supabaseé¡¹ç›®æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€
3. æŸ¥çœ‹å®¹å™¨æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ“Š éƒ¨ç½²æ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
Nginx/è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¯é€‰ï¼‰
    â†“
åç«¯æœåŠ¡ (Dockerå®¹å™¨)
    â”œâ”€â”€ Express.js (ç«¯å£3001)
    â”œâ”€â”€ APIè·¯ç”±
    â”‚   â”œâ”€â”€ /api/health
    â”‚   â”œâ”€â”€ /api/profile
    â”‚   â”œâ”€â”€ /api/blogs
    â”‚   â””â”€â”€ /api/qa
    â””â”€â”€ é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆpublicç›®å½•ï¼‰
    â””â”€â”€ Supabaseè¿æ¥
```

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **æ›´æ–°Supabase API Key** - ç¡®ä¿æ•°æ®åº“è¿æ¥æ­£å¸¸
2. **éƒ¨ç½²å‰ç«¯æ–‡ä»¶** - å°†å‰ç«¯æ„å»ºäº§ç‰©ä¸Šä¼ åˆ°publicç›®å½•
3. **é…ç½®åå‘ä»£ç†** - ä½¿ç”¨nginxé…ç½®åŸŸåå’ŒSSLè¯ä¹¦
4. **ç›‘æ§æœåŠ¡** - é…ç½®æ—¥å¿—ç›‘æ§å’Œå‘Šè­¦
5. **æ€§èƒ½ä¼˜åŒ–** - å¯ç”¨Gzipå‹ç¼©å’Œç¼“å­˜

---

**éƒ¨ç½²äººå‘˜**: AI Assistant  
**è”ç³»æ–¹å¼**: ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ  
**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-26 11:35:00
