# 使用宝塔面板部署到Docker容器

## 前提条件
- 已将本地 `frontend/dist` 文件夹内容上传到服务器的 `/tmp/` 目录
- 上传的文件包括：`index.html`、`assets/` 文件夹、`vite.svg`

## 通过宝塔面板执行部署

### 步骤1：准备文件
1. 登录宝塔面板：http://43.138.3.207:20794/
2. 点击左侧 **"文件"**
3. 进入 `/tmp/` 目录
4. 确认已上传 `index.html`、`assets/`、`vite.svg`
5. 创建新文件夹 `frontend-update`
6. 将这三个文件/文件夹移动到 `frontend-update` 中

### 步骤2：打开终端
1. 在宝塔面板左侧点击 **"终端"**
2. 点击 **"SSH终端"** 打开命令行窗口

### 步骤3：执行部署命令
在终端中依次执行以下命令：

```bash
# 创建临时目录（如果还没创建）
mkdir -p /tmp/frontend-update

# 移动文件到临时目录（如果文件直接在/tmp/）
mv /tmp/index.html /tmp/frontend-update/
mv /tmp/assets /tmp/frontend-update/
mv /tmp/vite.svg /tmp/frontend-update/

# 备份当前版本
docker exec personal_website_app sh -c 'cp -r /app/public /app/public.backup.$(date +%Y%m%d_%H%M%S)'

# 复制新文件到容器
docker cp /tmp/frontend-update/. personal_website_app:/app/public/

# 验证文件
docker exec personal_website_app sh -c 'ls -lh /app/public/assets/About-*.js'

# 重启容器
docker restart personal_website_app

# 等待容器启动
sleep 5

# 检查容器状态
docker ps | grep personal_website_app

# 清理临时文件
rm -rf /tmp/frontend-update
```

### 步骤4：验证
访问 http://43.138.3.207:3000/

如果页面仍显示旧版本，按 **Ctrl+F5** 强制刷新浏览器缓存。

## 说明
- 脚本会自动备份当前版本到 `/app/public.backup.YYYYMMDD_HHMMSS`
- 部署失败可以随时恢复备份
- 临时文件会在部署完成后自动清理
