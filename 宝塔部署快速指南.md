# 宝塔面板部署 - 快速操作指南

## 1️⃣ 获取宝塔面板密码

在PowerShell中执行：
```powershell
ssh root@43.138.3.207
```
密码：`Tencent@12345`

登录后执行：
```bash
bt 14
```
记录显示的password。

---

## 2️⃣ 登录宝塔面板

在浏览器访问：
```
https://43.138.3.207:20794/8ff1df99
```

- 用户名：`ede6tf5z`
- 密码：步骤1获取的password

---

## 3️⃣ 本地构建前端

在本地PowerShell执行：
```powershell
cd C:\Users\28945\Desktop\个人网站重制版\frontend
npm install
npm run build
```

构建完成后，会在 `dist` 目录生成静态文件。

---

## 4️⃣ 在宝塔面板创建站点

1. 点击左侧 **"网站"** → **"添加站点"**

2. 配置：
   - 域名：`43.138.3.207`
   - 根目录：`/www/wwwroot/personal-website`
   - FTP：不创建
   - 数据库：不创建
   - PHP版本：纯静态

3. 点击 **"提交"**

---

## 5️⃣ 上传前端文件

### 使用宝塔文件管理器（推荐）

1. 点击左侧 **"文件"**

2. 进入 `/www/wwwroot/personal-website`

3. 删除默认的 `index.html` 和 `404.html`

4. 点击 **"上传"**，上传以下文件（来自 `dist` 目录）：
   - `index.html`
   - `assets/` 文件夹（整个）
   - `vite.svg`

---

## 6️⃣ 配置反向代理（重要！）

1. 点击左侧 **"网站"** → 找到你的站点 → 点击 **"设置"**

2. 点击左侧 **"反向代理"** → **"添加反向代理"**

3. 配置：
   - **代理名称**：`backend_api`
   - **目标URL**：`http://127.0.0.1:3001`
   - **发送域名**：`$host`
   - **代理目录**：`/api`

4. 点击 **"提交"**

---

## 7️⃣ 配置伪静态（支持React Router）

1. 点击左侧 **"网站"** → 找到你的站点 → 点击 **"设置"**

2. 点击左侧 **"伪静态"**

3. 输入以下规则：

```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

4. 点击 **"保存"**

---

## 8️⃣ 验证部署

访问：`http://43.138.3.207`

**预期结果**：
- ✅ 网站正常显示
- ✅ 可以访问各个页面
- ✅ API请求正常（查看浏览器控制台，没有404错误）

---

## 🔧 常见问题

### 问题1：API请求404

**原因**：反向代理未正确配置

**解决**：
- 检查反向代理配置
- 确认后端Docker容器正在运行：`docker ps`

### 问题2：刷新页面404

**原因**：伪静态规则未配置

**解决**：按照步骤7配置伪静态

### 问题3：静态资源404

**原因**：文件未正确上传

**解决**：
- 检查 `/www/wwwroot/personal-website/assets/` 目录是否存在
- 确保所有JS和CSS文件都已上传

---

## ✅ 完成后

部署成功后：
1. 访问 `http://43.138.3.207` 查看效果
2. 如果看到旧页面，清除浏览器缓存或使用无痕模式
3. 确认"关于我"页面显示新版本（双列布局+王者荣耀省标）

---

## 💡 提示

- 后端Docker容器继续运行，无需修改
- 宝塔面板只负责托管前端静态文件
- 反向代理将 `/api/*` 请求转发到 `http://127.0.0.1:3001`
- 端口3001已在防火墙中开放
