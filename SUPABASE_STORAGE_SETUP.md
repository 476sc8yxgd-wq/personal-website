# Supabase å­˜å‚¨é…ç½®æŒ‡å—

## é—®é¢˜ï¼šä¸Šä¼ å°é¢å›¾ç‰‡å¤±è´¥

### è§£å†³æ­¥éª¤

#### 1. ç™»å½• Supabase æ§åˆ¶å°
è®¿é—®: https://supabase.com/dashboard

#### 2. åˆ›å»ºå­˜å‚¨æ¡¶

1. è¿›å…¥ä½ çš„é¡¹ç›®
2. å·¦ä¾§å¯¼èˆªæ ç‚¹å‡» **Storage**ï¼ˆå­˜å‚¨ï¼‰
3. ç‚¹å‡» **New bucket**ï¼ˆæ–°å»ºå­˜å‚¨æ¡¶ï¼‰
4. å¡«å†™ä»¥ä¸‹ä¿¡æ¯:
   - **Name**: `blog-images`
   - **Public bucket**: âœ… å‹¾é€‰ï¼ˆéå¸¸é‡è¦ï¼ï¼‰
   - **File size limit**: æ ¹æ®éœ€è¦è®¾ç½®ï¼ˆå»ºè®® 5MBï¼‰
   - **Allowed MIME types**: `image/*`
5. ç‚¹å‡» **Create bucket**ï¼ˆåˆ›å»ºå­˜å‚¨æ¡¶ï¼‰

#### 3. é…ç½®å­˜å‚¨æ¡¶æƒé™

##### ç­–ç•¥é…ç½® (Policies)

1. åœ¨ Storage é¡µé¢ï¼Œç‚¹å‡» `blog-images` å­˜å‚¨æ¡¶
2. åˆ‡æ¢åˆ° **Policies**ï¼ˆç­–ç•¥ï¼‰æ ‡ç­¾é¡µ
3. ç‚¹å‡» **New policy**ï¼ˆæ–°å»ºç­–ç•¥ï¼‰
4. åˆ›å»ºä»¥ä¸‹ä¸¤ä¸ªç­–ç•¥ï¼š

**ç­–ç•¥ 1: å…è®¸å…¬å¼€è¯»å–**
- **Policy name**: `Public read access`
- **Allowed operation**: `SELECT`
- **Target roles**: `anon`, `authenticated`
- **Target tables**: (ä¸é€‰æ‹©ï¼Œä½¿ç”¨é»˜è®¤)
- **Using custom SQL**: å–æ¶ˆå‹¾é€‰
- ç‚¹å‡» **Review** â†’ **Save**

**ç­–ç•¥ 2: å…è®¸ä¸Šä¼ **
- **Policy name**: `Upload access`
- **Allowed operation**: `INSERT`
- **Target roles**: `authenticated`
- **Target tables**: (ä¸é€‰æ‹©ï¼Œä½¿ç”¨é»˜è®¤)
- **Using custom SQL**: å–æ¶ˆå‹¾é€‰
- ç‚¹å‡» **Review** â†’ **Save**

#### 4. éªŒè¯é…ç½®

1. æ£€æŸ¥å­˜å‚¨æ¡¶åˆ—è¡¨ä¸­æ˜¯å¦æ˜¾ç¤º `blog-images`ï¼Œä¸”å›¾æ ‡æ˜¯å…¬å¼€çš„ï¼ˆğŸŒï¼‰
2. æµ‹è¯•ä¸Šä¼ å›¾ç‰‡

### å¸¸è§é”™è¯¯åŠè§£å†³

#### é”™è¯¯: "Bucket not found"
**åŸå› **: å­˜å‚¨æ¡¶ä¸å­˜åœ¨
**è§£å†³**: æŒ‰ç…§æ­¥éª¤ 2 åˆ›å»ºå­˜å‚¨æ¡¶

#### é”™è¯¯: "Permission denied"
**åŸå› **: æƒé™ç­–ç•¥é…ç½®ä¸æ­£ç¡®
**è§£å†³**: æŒ‰ç…§æ­¥éª¤ 3 é…ç½®ä¸Šä¼ å’Œè¯»å–æƒé™

#### é”™è¯¯: "The bucket is not public"
**åŸå› **: å­˜å‚¨æ¡¶æœªè®¾ç½®ä¸ºå…¬å¼€
**è§£å†³**:
1. ç‚¹å‡»å­˜å‚¨æ¡¶åç§°è¿›å…¥è¯¦æƒ…
2. æ‰¾åˆ° **Public bucket** è®¾ç½®
3. åˆ‡æ¢å¼€å…³ä¸º **ON**ï¼ˆå…¬å¼€ï¼‰

### å¿«é€Ÿæµ‹è¯•é…ç½®

ä¸Šä¼ å›¾ç‰‡åï¼ŒæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
å¼€å§‹ä¸Šä¼ å›¾ç‰‡: {fileName: "...", filePath: "...", fileSize: ...}
ä¸Šä¼ æˆåŠŸï¼Œè·å–å…¬å…±URL...
å›¾ç‰‡URL: https://xxx.supabase.co/storage/v1/object/public/blog-images/...
```

å¦‚æœçœ‹åˆ°é”™è¯¯ä¿¡æ¯ï¼Œè¯·å¤åˆ¶å®Œæ•´çš„é”™è¯¯ä¿¡æ¯å¹¶æ ¹æ®ä¸Šé¢çš„å¸¸è§é”™è¯¯éƒ¨åˆ†è§£å†³ã€‚
